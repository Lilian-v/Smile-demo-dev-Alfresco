<!-- Share configuration related to this particular Share module extension, such as:
     - Doclib action config
     - Form config
     - Aspect and Type config
     - Advanced Search

    Note. Any configuration related to the whole Share.war webapp
           (i.e. not specific to this share extension) should be
            placed in the environment specific config file:
             alfresco/tomcat/shared/classes/alfresco/web-extension/share-config-custom.xml
     -->
<alfresco-config>
    <!-- 
		Configuration Share 
	-->
	
	<config evaluator="string-compare" condition="DocumentLibrary">
		<aspects>
			<!-- Permet de définir les aspects que l'on peut ajouter / retirer depuis 
				l'interface Share -->
			<visible>
				<aspect name="smile:documentComptable" />
			</visible>
			<addable> <!-- defaults to visible config -->
			</addable>
			<removeable> <!-- defaults to visible config -->
			</removeable>
		</aspects>
		<types>
			<!-- Permet de définir les transitions de type possible depuis l'interface Share -->
		</types>
	</config>

	<!-- 
		Formulaires 
	-->

	<!-- Aspect smile:documentComptable -->
	<config evaluator="aspect" condition="smile:documentComptable">
		<forms>
			<form>
				<field-visibility>
					<!-- Champs visibles si l'aspect est présent, dans l'ordre où l'on souhaite les afficher -->
					<show id="smile:documentComptableID" />
					<show id="smile:documentComptableDateFacturation" />
				</field-visibility>
				<!-- Optionnel, paramètres d'affichage supplémentaires -->
				<appearance>
					<!-- On regroupe les champs dans un panel pour un affichage plus joli -->
					<set id="smileDocumentComptableSet" appearance="panel" label-id="form.set.smile_documentComptable" />
					<field id="smile:documentComptableID" set="smileDocumentComptableSet" />
					<field id="smile:documentComptableDateFacturation" set="smileDocumentComptableSet" />
				</appearance>
			</form>
		</forms>
	</config>
    	
	<!-- Formulaire datalist Client Externe -->
	<config evaluator="node-type" condition="smile:datalistClientExterne">
		<forms>
			<form>
				<field-visibility>
					<show id="smile:datalistClientExterneNomClient" />
					<show id="smile:datalistClientExternePrenomClient" />
					<show id="smile:datalistClientExterneAnneeAdhesion" />
					<show id="smile:datalistClientExterneSecteurActivite" />
					<show id="smile:datalistClientExterneEstActif" />
				</field-visibility>
				<edit-form template="../data-lists/forms/dataitem.ftl" />
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="smile:datalistClientExterne">
		<forms>
			<form>
				<field-visibility>
					<show id="smile:datalistClientExterneNomClient" />
					<show id="smile:datalistClientExternePrenomClient" />
					<show id="smile:datalistClientExterneAnneeAdhesion" />
					<show id="smile:datalistClientExterneSecteurActivite" />
					<show id="smile:datalistClientExterneEstActif" />
				</field-visibility>
				<create-form template="../data-lists/forms/dataitem.ftl" />
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="smile:datalistClientExterneNomClient" />
					<show id="smile:datalistClientExternePrenomClient" />
					<show id="smile:datalistClientExterneAnneeAdhesion" />
					<show id="smile:datalistClientExterneSecteurActivite" />
					<show id="smile:datalistClientExterneEstActif" />
				</field-visibility>
			</form>
		</forms>
	</config>
	
    <!-- Recherche avancée Smile -->
   <config evaluator="string-compare" condition="AdvancedSearch">
		<advanced-search>
			<forms>
				<form id="smile_document_advanced_search" labelId="form.advancedSearch.smile.label" descriptionId="form.advancedSearch.smile.description">cm:content</form>
			</forms>
		</advanced-search>
	</config> 
	<config evaluator="model-type" condition="cm:content">
		<forms>
			<form id="smile_document_advanced_search">
				<field-visibility>
					<show id="smile:documentComptableID" force="true"/>
					<show id="smile:documentComptableDateFacturation" force="true"/>
					<show id="cm:name" force="true"/>
					<show id="cm:title" force="true"/>
					<show id="cm:description" force="true"/>
				</field-visibility>
				<appearance>
					<!-- On veut choisir une plage de date, et non une date exacte -->
					<field id="smile:documentComptableDateFacturation">
						<control template="/org/alfresco/components/form/controls/daterange.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>
    
</alfresco-config>